version: '3'

services:
  app:
    image: "mcr.microsoft.com/devcontainers/javascript-node:20"

    volumes:
      - "..:/workspace:cached"
      - "./test-connection.json:/home/node/.tedious/test-connection.json"

    # Overrides default command so things don't shut down after the process ends.
    command: "sleep infinity"

    depends_on:
      - mssql

  mssql:
    image: mcr.microsoft.com/mssql/server:2022-latest

    restart: unless-stopped

    environment:
      - "ACCEPT_EULA=Y"
      - "MSSQL_SA_PASSWORD=QhNemHjCWHui9vNnRC.TMRAhusvM3n9_"

    ports:
      - "1433:1433"
